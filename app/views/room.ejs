<!DOCTYPE html>
<html lang="en">
	<head>
   		<meta charset="UTF-8">
   		<meta name="description" content="kord.io makes it easy to connect and collaborate with others over an editable online whiteboard in realtime.">
   		<meta name="keywords" content="kord, kord.io, draw, collaborate, real-time">
    	<meta name="author" content="UMass Amherst CMPSCI 326: Julian, James, Sara, Nam, Mattheaus">
    	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<title>Room</title>

		<!-- Bootstrap Core CSS -->
		<link href="/css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom CSS -->
		<link href="/css/simple-sidebar.css" rel="stylesheet">

		<!-- Impromptu CSS -->
		<link href="/css/jquery-impromptu.min.css" rel="stylesheet">

		<!-- FONT ICONS -->
		<link rel="stylesheet" href="/icons/icons.css">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

		<!-- CANVAS -->
		<link rel='stylesheet' href='/stylesheets/style.css' />
		<style type="text/css">
		body {
			overflow: hidden;
		}
		#canvas {
			width: 100%;
			height: 100%;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 1;
		}
		</style>
		<script src="/js/jquery-2.1.1.min.js"></script>
		<script src="../js/raphael-min.js"></script>
	</head>

	<body>
		<div id="wrapper">

			<!-- Sidebar -->
			<div id="sidebar-wrapper">
				<ul class="sidebar-logo">
					<li> <a href="index.html" id="sidebar_logo"></a> </li>
				</ul>

				<ul class="sidebar-nav">
					<li><a href="#" title = "draw"><span class="icon-software-pencil"></span></a></li>
					<li><a id="addvideo" title = "video"><span class="icon-social-youtube-square"></span></a></li>
					<li><a id="addimage" title = "image"><span class="icon-basic-picture"></span></a></li>
					<li><a id="addcode" title = "code"><span class="icon-arrows-glide-horizontal"></a></li>
						<li><a href="#" title = "pdf"><span class="icon-easel"></span></a></li>
						<li><a href="#" title = "text"><span class="icon-ecommerce-receipt"></span></a></li>

						<!--<li> <a href="javascript:;" data-toggle="collapse" data-target="#demo">
						<span class="icon-man-people-streamline-user"></span><i class="fa fa-fw fa-caret-down"></i></a>
						<ul id="demo" class="collapse">
						<li> <a href="#">Dropdown Item</a> </li>
						<li> <a href="#">Dropdown Item</a> </li>
					</ul>
				</li>-->

			</ul>

			<div class="sidebar-footer">
				<a href="#" title = "user"><span class="icon-man-people-streamline-user"></span></a>
				<a href="#" title = "tools"><span class="icon-settings-streamline-1"></span></a>
			</div>

		</div>
		<!-- /#sidebar-wrapper -->

		<!-- Page Content -->
		<div id="page-content-wrapper">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div id="canvas"></div>
						<h1>Room <span id="urlHeader"></span></h1>
						<p><%= message %></p>
						<hr>
						<p> Nickname: <%= nickname %> <br>
							Room URL: <span id="url"></span> <br>
							Board Count: <span id="bcount"></span> <br>
							<br>
							<b>Members</b>
							<ul id="members">
							</ul>
							<b>Moderators</b>
							<ul id="moderators">
							</ul>
							<b>Online</b>
							<ul id="onlineusers">
							</ul>
						</p>
						<p><a href="/logout">Logout</a></p>
						<script src="/socket.io/socket.io.js"></script>
						<script>
							var socket;
							var defaultsocket = io.connect();
							defaultsocket.on('connect',
								function() {
									socket = io.connect('http://' + window.location.host, { 'forcenewconnection': true } );
								}
							);
							var roomid = '<%= roomid %>';
							var nickname = '<%= nickname %>';
							var boardid = '<%= boardid %>';
							var userid = '<%= userid %>';
						</script>
						<script src="../js/client.js"></script>
					</div>
				</div>
			</div>

			<div class="container">
                <div class="chat-window" id="chat_window_1">
                    <div class="panel panel-default">
                        <div class="panel-heading top-bar">
                            <div class="col-md-8 col-xs-8">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span>Chat</h3>
                            </div>
                            <div class="col-md-4 col-xs-4" style="text-align: right;"> <a href="#"><span id="minim_chat_window" class="glyphicon glyphicon-minus icon_minim"></span></a> </div>
                        </div>
                        <div class="panel-body msg_container_base">
                            <div id="conversation"></div>
                        </div>
	                	<div class="panel-footer">
		                    <div class="input group">
                            	<form action= "">
            						<input id="data" autocomplete="off" placeholder="Message"/>
            						<button>Send</button>

            					</form>
		                    </div>
	                	</div>
            		</div>
				</div>
			</div>
		</div>
		<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
		<script src="/js/jquery-impromptu.min.js"></script>
		<script src="/js/bootstrap.min.js"></script>
		<script>
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});

		$('#addvideo').click(function(event) {
				event.preventDefault();

				var videostates = {
					state0: {
						html:'Enter a Youtube Video ID <br><input style="width:100%" type="text" placeholder="Video ID" id="res_video_data">',
						buttons: { 'Add to Board': true },
						submit:function(e,v,m,f){
							setMode('res_video');
							setResource($('#res_video_data').val());
						}
					}
				}

				$.prompt(videostates);
		});

		$('#addimage').click(function(event) {
				event.preventDefault();

				var imagestates = {
					state0: {
						html:'Enter an Image URL (We recommend imgur.) <br><input style="width:100%" type="text" placeholder="Image URL" id="res_image_data">',
						buttons: { 'Add to Board': true },
						submit:function(e,v,m,f){
							setMode('res_image');
							console.log($('#res_image_data').val());
							setResource($('#res_image_data').val());
						}
					}
				}

				$.prompt(imagestates);
		});

		$('#addcode').click(function(event) {
				event.preventDefault();

				var codestates = {
					state0: {
						html:'Stuff <br><input type="text" id="res_code_data">',
						buttons: { 'Add to Board': true },
						submit:function(e,v,m,f){
							setMode('res_code');
							setResource($('#res_code_data').val());
						}
					}
				}

				$.prompt(codestates);
		});
		</script>
	</body>
</html>
